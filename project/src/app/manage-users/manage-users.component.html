<div class="container my-5">
  <h2 class="text-center mb-4">Manage Users</h2>
  <div class="card shadow-lg">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="thead-dark">
            <tr>
              <th>ID</th>
              <th>Email</th>
              <th>Name</th>
              <th>Gender</th>
              <th>Birth Date</th>
              <th>Is Admin</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td>{{ user.id }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.male === '1' ? 'Male' : 'Female' }}</td>
              <td>{{ user.birth_date }}</td>
              <td>{{ user.is_admin === '1' ? 'Yes' : 'No' }}</td>
              <td>
                <button class="btn btn-warning btn-sm mr-2" (click)="openEditForm(user)">Edit</button>
                <button (click)="deleteUser(user.id)" class="btn btn-danger btn-sm">Delete</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="edit-user-container mt-5" *ngIf="selectedUser">
    <div class="card shadow-lg">
      <div class="card-header bg-primary text-white">
        <h3 class="m-0">Edit User</h3>
      </div>
      <div class="card-body">
        <form (ngSubmit)="updateUser()">
          <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" [(ngModel)]="selectedUser.email" name="email" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" [(ngModel)]="selectedUser.name" name="name" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="gender">Gender:</label>
            <select id="gender" [(ngModel)]="selectedUser.male" name="male" class="form-control" required>
              <option value="1">Male</option>
              <option value="0">Female</option>
            </select>
          </div>
          <div class="form-group">
            <label for="birth_date">Birth Date:</label>
            <input type="date" id="birth_date" [(ngModel)]="selectedUser.birth_date" name="birth_date" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="is_admin">Admin Status:</label>
            <select id="is_admin" [(ngModel)]="selectedUser.is_admin" name="is_admin" class="form-control">
              <option value="1">Yes</option>
              <option value="0">No</option>
            </select>
          </div>          
          <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-success">Update User</button>
            <button type="button" (click)="cancelEdit()" class="btn btn-secondary">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<style>
  .container {
    max-width: 900px;
  }
  .table {
    margin-bottom: 0;
  }
  .edit-user-container {
    margin-top: 30px;
  }
  .card-header {
    background-color: #007bff;
    color: #fff;
  }
  .btn-warning {
    color: #fff;
  }
</style>
